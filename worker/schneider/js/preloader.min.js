(function(){"use strict";function t(t,e){var o=[],i=this.options;return i.onProgress&&t&&i.onProgress.call(this,t,e,this.completed.length),this.completed.length+this.errors.length===this.queue.length&&(o.push(this.completed),this.errors.length&&o.push(this.errors),i.onComplete.apply(this,o)),this}var e=function(t,e){this.options={pipeline:!1,auto:!0,onComplete:function(){}},e&&"object"==typeof e&&this.setOptions(e),this.addQueue(t),this.queue.length&&this.options.auto&&this.processQueue()};e.prototype.setOptions=function(t){var e,o=this.options;for(e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);return this},e.prototype.addQueue=function(t){return this.queue=t.slice(),this},e.prototype.reset=function(){return this.completed=[],this.errors=[],this},e.prototype.load=function(e,o){var i=new Image,s=this,n=this.options;return i.onerror=i.onabort=function(){this.onerror=this.onabort=this.onload=null,s.errors.push(e),n.onError&&n.onError.call(s,e),t.call(s,e),n.pipeline&&s.loadNext(o)},i.onload=function(){this.onerror=this.onabort=this.onload=null,s.completed.push(e),t.call(s,e,this),n.pipeline&&s.loadNext(o)},i.src=e,this},e.prototype.loadNext=function(t){return t++,this.queue[t]&&this.load(this.queue[t],t),this},e.prototype.processQueue=function(){var t=0,e=this.queue,o=e.length;if(this.reset(),this.options.pipeline)this.load(e[0],0);else for(;o>t;++t)this.load(e[t],t);return this},"function"==typeof define&&define.amd?define(function(){return e}):this.preLoader=e}).call(this);